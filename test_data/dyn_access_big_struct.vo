// Test dynamic access returning big struct (slots > 2)
// Bug #3: codegen panics when LHS expects a struct with more than 2 slots

type BigStruct struct {
    A int
    B int
    C int
    D int
}

type Container struct {
    Data BigStruct
}

func main() {
    c := &Container{Data: BigStruct{A: 1, B: 2, C: 3, D: 4}}
    
    // Cast to any
    var a any = c
    
    // Dynamic access to get BigStruct field
    // LHS type is BigStruct (4 slots)
    var data BigStruct
    var err error
    data, err = a~>Data
    if err != nil {
        println("unexpected error:", err.Error())
        return
    }
    
    if data.A != 1 || data.B != 2 || data.C != 3 || data.D != 4 {
        println("FAIL: data mismatch")
        return
    }
    
    println("PASS")
}

// Expected output:
// PASS
