package main

import "../../libs/vox"

func cmdBuild(args []string) int {
	path := "."
	if len(args) > 0 {
		path = args[0]
	}

	println("Building project:", path)

	module, err := vox.CompileDir(path)
	if err != nil {
		println("[VO:COMPILE]", err.Error())
		return 1
	}

	println("Running module:", vox.Name(module))

	err = vox.Run(module)
	vox.Free(module)

	if err != nil {
		println("[VO:PANIC]", err.Error())
		return 1
	}

	println("[VO:OK]")
	return 0
}
