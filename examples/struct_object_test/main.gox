package main

// Test struct (value type) vs object (reference type) semantics

type S struct {
    x int
    y int
}

type O object {
    x int
    y int
}

func main() {
    // Test 1: Struct is value type - assignment copies
    println(1000)
    
    s1 := S{10, 20}
    s2 := s1  // Should copy
    s2.x = 100
    
    println(s1.x)  // Should be 10 (unchanged)
    println(s2.x)  // Should be 100
    
    // Test 2: Object is reference type - assignment shares
    println(2000)
    
    o1 := O{10, 20}
    o2 := o1  // Should share reference
    o2.x = 100
    
    println(o1.x)  // Should be 100 (changed)
    println(o2.x)  // Should be 100
    
    // Test 3: Struct as map key
    println(3000)
    
    m := map[S]int{}
    k1 := S{1, 2}
    k2 := S{1, 2}  // Same value as k1
    k3 := S{3, 4}  // Different value
    
    m[k1] = 100
    m[k3] = 200
    
    println(m[k1])  // Should be 100
    println(m[k2])  // Should be 100 (same key value as k1)
    println(m[k3])  // Should be 200
    
    // Test 4: Changing original struct doesn't affect map key
    println(4000)
    
    k4 := S{5, 6}
    m[k4] = 500
    println(m[k4])  // Should be 500
    
    k4.x = 99  // Modify original struct
    
    // k4 now has different value, so lookup should fail (return 0)
    println(m[k4])  // Should be 0 (key {99,6} not found)
    
    // Original key {5,6} should still work
    k5 := S{5, 6}
    println(m[k5])  // Should be 500
    
    println(9999)
}
