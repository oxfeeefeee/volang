# Control flow test: sum 1 to 10 = 55

module control_flow

func main
  locals 10
  # r0 = sum = 0
  0: LoadInt r0, 0
  # r1 = i = 1
  1: LoadInt r1, 1
  # r2 = 10
  2: LoadInt r2, 10
  # r3 = 1 (increment)
  3: LoadInt r3, 1
  
  # loop:
  # r4 = (i > 10)
  4: GtI64 r4, r1, r2
  # if r4: jump to end (offset 5: pc=6, 6+5-1=10)
  5: JumpIf r4, 5
  # sum = sum + i
  6: AddI64 r0, r0, r1
  # i = i + 1
  7: AddI64 r1, r1, r3
  # jump back to loop (offset -3: pc=9, 9-3-1=5, but we want 4, so -4)
  8: Jump -4
  
  # end:
  # print sum (should be 55)
  9: DebugPrint r0
  10: Return r0, 0
end

entry main
