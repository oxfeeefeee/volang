package main

import "../../libs/vox"

func cmdDump(args []string) int {
	if len(args) == 0 {
		println("usage: vo dump <file.vob|file.vot>")
		return 1
	}

	file := args[0]

	module, err := vox.LoadBytecodeBinary(file)
	if err != nil {
		// Try loading as text file
		module, err = vox.LoadBytecodeText(file)
		if err != nil {
			println("[VO:IO]", err.Error())
			return 1
		}
	}

	text := vox.FormatBytecode(module)
	print(text)
	vox.Free(module)
	return 0
}
